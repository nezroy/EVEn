if(typeof Object.create!="function"){(function(){var a=function(){};Object.create=function(b){if(arguments.length>1){throw Error("Second argument not supported")}if(b===null){throw Error("Cannot set a null [[Prototype]]")}if(typeof b!="object"){throw TypeError("Argument must be an object")}a.prototype=b;return new a()}})()}var EVEn=EVEn||{};(function(b){var a=EVEn;a.FormatNum=function(j,g){var f=[],h=String(Math.floor(j)),d=-1,e=0,c;g=g||0;for(e=h.length-1;e>=0;e--){if(d%3==0){d=1;f.push(",")}else{if(d==-1){d=1}else{d++}}f.push(h.charAt(e))}h="";for(e=f.length-1;e>=0;e--){h=h.concat(f[e])}if(g>0){c=j.toFixed(g);h+=c.substring(c.length-g-1)}return h}})(jQuery);EVEn.data=EVEn.data||{};(function(c){var b=EVEn.data,a=EVEn;b.lastErr;b.CreateSource=function(f,e,d){var g=c.Deferred();if(typeof EVEn.data["src_"+f]=="undefined"){g.rejectWith(null,[null,"error","unrecognized source type"]);return g.promise()}Object.create(EVEn.data["src_"+f]).SetConfig(g,e,d);return g.promise()}})(jQuery);EVEn.data.src_base=EVEn.data.src_base||{};(function(c){var b=EVEn.data.src_base,a=EVEn,d=EVEn.data;b.c={};b.tables={};b.SetConfig=function(g,f,e){g.rejectWith(e,[this,"error","not implemented"]);return g.promise()};b.HasTable=function(e){return this.tables.hasOwnProperty(e)};b.GetTables=function(){var e=[],f;for(f in this.tables){if(!this.tables.hasOwnProperty(f)){continue}e.push(f)}return e};b.LoadTables=function(f,e){var g=c.Deferred();g.rejectWith(e,[this,"error","not implemented"]);return g.promise()}})(jQuery);var EVEn=EVEn||{};EVEn.data.src_json=EVEn.data.src_json||Object.create(EVEn.data.src_base);(function(c){var b=EVEn.data.src_json,a=EVEn,d=EVEn.data;c.extend(true,b.c,{cache:true,datatype:"json"});b.metaInf=null;b.jsonfiles={};b.SetConfig=function(h,f,e){var g=this;if(!f.hasOwnProperty("path")||typeof f.path!="string"){h.rejectWith(e,[this,"error","path is required"]);return}c.extend(true,this.c,f);if(!this.c.datatype!="json"&&this.c.datatype!="jsonp"){h.rejectWith(e,[this,"error","invalid datatype: "+this.c.datatype]);return}c.ajax({dataType:this.c.datatype,cache:this.c.cache,jsonp:false,jsonpCallback:"EVEn_metainf_callback",url:this.c.path+"/metainf."+this.c.datatype}).done(function(j,i,k){g.metainfDone(j,i,k,h,e)}).fail(function(k,i,j){g.metainfFail(k,i,j,h,e)})};b.metainfDone=function(h,f,l,k,e){var j,g;if(!h){return k.rejectWith(e,[this,"error","invalid data object"])}if(!h.hasOwnProperty("formatID")||h.formatID!="1"){return k.rejectWith(e,[this,"error","unknown data format"])}if(!h.hasOwnProperty("schema")||!h.hasOwnProperty("version")){return k.rejectWith(e,[this,"error","data has no version information"])}if(!h.hasOwnProperty("tables")||!h.hasOwnProperty("tables")){return k.rejectWith(e,[this,"error","data has no table information"])}this.metaInf=h;this.tables={};this.jsonfiles={};for(j in h.tables){if(!h.tables.hasOwnProperty(j)){continue}this.tables[j]={loaded:false};c.extend(true,this.tables[j],h.tables[j]);this.jsonfiles[this.tables[j]["j"]]={loaded:false};if(this.tables[j]["c"]&&this.tables[j]["c"].length>0){this.tables[j]["colmap"]={};for(g=0;g<this.tables[j]["c"].length;g++){this.tables[j]["colmap"][this.tables[j]["c"][g]]=g}}}k.resolveWith(e,[this])};b.metainfFail=function(i,f,g,h,e){h.rejectWith(e,[this,f,g])};b.GetMetainf=function(e){if(!this.metaInf){return null}if(!this.metaInf.hasOwnProperty(e)){return null}return this.metaInf[e]};b.GetVersion=function(){return this.GetMetainf("version")};b.GetVerdesc=function(){return this.GetMetainf("verdesc")};b.GetSchema=function(){return this.GetMetainf("schema")};b.LoadTables=function(j,f){var m=c.Deferred(),l,e,h,g=[],k={};for(h=0;h<j.length;h++){l=j[h];if(!this.HasTable(l)){g.push(l)}if(this.tables[l]["loaded"]){continue}e=this.tables[l]["j"];if(this.jsonfiles[e]["loaded"]){if(this.jsonfiles[e]["d"][l].hasOwnProperty("s")){m.rejectWith(f,[this,"error","i dunno what to do with segments yet"]);return m.promise()}this.tables[l]["d"]=this.jsonfiles[e][l]["d"];this.tables[l]["loaded"]=true}else{k[e]=false}}if(g.length>0){m.rejectWith(f,[this,"error","source does not provide required tables: "+g.join(", ")]);return m.promise()}for(e in k){if(!k.hasOwnProperty(e)){continue}c.ajax({dataType:this.c.datatype,cache:this.c.cache,jsonp:false,jsonpCallback:"EVEn_"+e+"_callback",url:this.c.path+"/"+e+"."+this.c.datatype}).done(b.FileDoneFactory(this,k,e,m,f)).fail(b.FileFailFactory(this,k,e,m,f))}return m.promise()};b.FileDoneFactory=function(g,i,e,h,f){return function(k,j,l){g.FileDone(k,j,l,i,e,h,f)}};b.FileDone=function(m,k,i,j,o,f,q){var l,e=1,h=0,n=1,g;j[o]="fail";if(!m){return f.rejectWith(q,[this,"error","invalid data object"])}if(!m.hasOwnProperty("formatID")||m.formatID!="1"){return f.rejectWith(q,[this,"error","unknown data format"])}for(l in m){if(!this.HasTable(l)){continue}if(m[l].hasOwnProperty("s")){return f.rejectWith(q,[this,"error","i dunno what to do with segments yet"])}this.tables[l]["d"]=m[l]["d"];this.tables[l]["loaded"]=true}this.jsonfiles[o]["d"]=m;this.jsonfiles[o]["loaded"]=true;j[o]=true;for(g in j){if(!j.hasOwnProperty(g)){continue}if(g==o){continue}n++;if(j[g]){if(j[g]!="fail"){e++}else{h++}}}if(e==n){f.resolveWith(q)}else{if(h==0){f.notifyWith(q,[this,n,e])}}};b.FileFailFactory=function(g,i,e,h,f){return function(l,j,k){g.FileFail(l,j,k,i,e,h,f)}};b.FileFail=function(k,g,h,j,e,i,f){j[e]="fail";i.rejectWith(f,[this,g,h])}})(jQuery);var EVEn=EVEn||{};EVEn.data.src_object=EVEn.data.src_object||Object.create(EVEn.data.src_base);(function(c){var b=EVEn.data.src_object,a=EVEn,d=EVEn.data;b.metaInf=null;b.SetConfig=function(h,f,e){var g;if(!f.hasOwnProperty("obj")||typeof f.obj!="object"){h.rejectWith(e,[this,"error","obj is required"]);return}c.extend(true,this.c,f);g=this.c.obj;if(!g.hasOwnProperty("metainf")){h.rejectWith(e,[this,"error","obj is missing metainf"]);return}if(!g.hasOwnProperty("data")){h.rejectWith(e,[this,"error","obj is missing data"]);return}this.metainfDone(g.metainf,h,e)};b.metainfDone=function(f,h,e){var g;if(!f){return h.rejectWith(e,[this,"error","invalid data object"])}if(!f.hasOwnProperty("formatID")||f.formatID!="1"){return h.rejectWith(e,[this,"error","unknown data format"])}if(!f.hasOwnProperty("schema")||!f.hasOwnProperty("version")){return h.rejectWith(e,[this,"error","data has no version information"])}if(!f.hasOwnProperty("tables")||!f.hasOwnProperty("tables")){return h.rejectWith(e,[this,"error","data has no table information"])}this.metaInf=f;this.tables={};this.jsonfiles={};for(g in f.tables){if(!f.tables.hasOwnProperty(g)){continue}this.tables[g]={loaded:false};c.extend(true,this.tables[g],f.tables[g]);this.jsonfiles[this.tables[g]["j"]]={loaded:false}}h.resolveWith(e,[this])};b.GetMetainf=function(e){if(!this.metaInf){return null}if(!this.metaInf.hasOwnProperty(e)){return null}return this.metaInf[e]};b.GetVersion=function(){return this.GetMetainf("version")};b.GetVerdesc=function(){return this.GetMetainf("verdesc")};b.GetSchema=function(){return this.GetMetainf("schema")};b.LoadTables=function(h,e){var l=c.Deferred(),j=this.c.obj["data"],g=[],f,k;if(!j){return l.rejectWith(e,[this,"error","invalid data object"])}if(!j.hasOwnProperty("formatID")||j.formatID!="1"){return l.rejectWith(e,[this,"error","unknown data format"])}for(f=0;f<h.length;f++){k=h[f];if(!this.HasTable(k)){g.push(k)}if(this.tables[k]["loaded"]){continue}if(!this.c.obj["data"].hasOwnProperty(k)){g.push(k)}else{this.tables[k]["d"]=this.c.obj["data"][k]["d"];this.tables[k]["loaded"]=true}}if(g.length>0){l.rejectWith(e,[this,"error","source does not provide required tables: "+g.join(", ")]);return l.promise()}l.resolveWith(e);return l.promise()}})(jQuery);var EVEn=EVEn||{};EVEn.IGB=EVEn.IGB||{};(function(e){var d=EVEn.IGB,c=EVEn,a,b;a=function(j){var i,l,k,g,h=false,f;f=e(this).attr("href");if(!f.match(/^eve:/i)){return}j.preventDefault();if(f.match(/^eve:trust:/i)){h=true}f=f.replace(/^eve:\s*/i,"").replace(/^trust:\s*/i,"");if(typeof(CCPEVE)=="undefined"){return}i=e(this).data("igb-corpid");l=e(this).data("igb-chan");k=e(this).data("igb-cctype");g=e(this).data("igb-trustme");if(i&&i>0){CCPEVE.showInfo(2,i)}if(l){CCPEVE.joinChannel(l)}if(k){CCPEVE.createContract(k)}if(g){CCPEVE.requestTrust(g)}};b=function(){e("a[href^='eve:']").click(a)};e(b)})(jQuery);var EVEn=EVEn||{};EVEn.map=EVEn.map||{};(function(e){var d=EVEn.map,c=EVEn,b=9460528400000000,a={src:null,sysNameMap:{},sysNames:[],routeGraph:{},space:null,c:{jumps:false,planets:false,moons:false,belts:false,gates:false,celestials:false,statistics:false,landmarks:false}},f={};d.Create=function(k,i,h,g){if(i!="J"&&i!="K"&&i!="W"){return null}var j=Object.create(f);e.extend(true,j,a);j.src=k;j.space=i;return j.SetConfig(h,g)};f.SetConfig=function(h,g){var j=e.Deferred(),k=[],i=this;if(!this.src||typeof this.src.HasTable!="function"){j.rejectWith(g,[i,"error","invalid source"]).promise()}if(!this.space||(this.space!="W"&&this.space!="K"&&this.space!="J")){return j.rejectWith(g,[i,"error","invalid space designation"]).promise()}if(h){e.extend(true,this.c,h)}k.push("map"+this.space+"Regions","map"+this.space+"Constellations","map"+this.space+"SolarSystems","map"+this.space+"SolarSystemJumps");if(this.space=="K"||this.space=="J"){if(this.c.jumps){k.push("mapRegionJumps","mapConstellationJumps","mapJumps")}if(this.c.belts){k.push("map"+this.space+"Belts")}if(this.c.gates){k.push("map"+this.space+"Gates")}if(this.c.landmarks){k.push("mapLandmarks")}}if(this.c.planets){k.push("map"+this.space+"Planets")}if(this.c.moons){k.push("map"+this.space+"Moons")}if(this.c.celestials){k.push("map"+this.space+"Celestials")}if(this.c.statistics){k.push("map"+this.space+"CelestialStatistics")}this.src.LoadTables(k).done(function(){i.LoadDone();j.resolveWith(g,[i])}).fail(function(n,l,m){j.rejectWith(g,[i,"error",m])});return j.promise()};f.LoadDone=function(){var h=this.src.tables["map"+this.space+"SolarSystems"]["d"],g=this.src.tables["map"+this.space+"SolarSystems"]["colmap"],n,k,j,m,i,l;for(n in h){if(!h.hasOwnProperty(n)){continue}j=h[n];this.sysNameMap[j[g.solarSystemName]]=n;this.sysNames.push(j[g.solarSystemName]);m=false;if(this.space!="W"){m="map"+this.space+"SolarSystemJumps"}if(m&&this.src.HasTable(m)){l={jumps:[],cont:j[g.contiguous],sec:j[g.security].toFixed(1),name:j[g.solarSystemName]};i=this.src.tables[m]["d"][n];for(k in i){if(!i.hasOwnProperty(k)){continue}l.jumps.push(k)}this.routeGraph[n]=l}}this.sysNames.sort()};f.GetSystem=function(g){var i,h;if(!g){return null}if(g.hasOwnProperty("name")&&this.sysNameMap.hasOwnProperty(g.name)){i=this.sysNameMap[g.name]}else{if(g.hasOwnProperty("id")){i=g.id}else{return null}}h=d.System.Create();if(h.LoadID(this.src,"map"+this.space+"SolarSystems",i)){return h}return null};f.GetSystems=function(){return d.SystemIter.Create(this.src,"map"+this.space+"SolarSystems")};f.JumpDist=function(q,l){var i=this.src.tables["map"+this.space+"SolarSystems"]["d"],m=this.src.tables["map"+this.space+"SolarSystems"]["colmap"],h=i[q][m.x],g=i[l][m.x],p=i[q][m.y],o=i[l][m.y],k=i[q][m.z],j=i[l][m.z],n;n=Math.sqrt(Math.pow(h-g,2)+Math.pow(p-o,2)+Math.pow(k-j,2));return n/b};f.Route=function(t,l,n,x,z){var y=[],v={},j,m,g,h,s,u,k,r,w,o=[],A,q,p;if(!this.routeGraph.hasOwnProperty(t)||!this.routeGraph.hasOwnProperty(l)){return y}for(j in this.routeGraph){if(!this.routeGraph.hasOwnProperty(j)){continue}this.routeGraph[j]["td"]=-1;this.routeGraph[j]["prevID"]=-1;this.routeGraph[j]["visited"]=false}if(n&&n.length>0){for(r=0;r<n.length;r++){v[n[r]]=true}}if(t==l){return y}w=t;t=l;l=w;m=t;this.routeGraph[t]["td"]=0;while(!this.routeGraph[l]["visited"]){if(m!=t){A=-1;q=-1;for(r=0;r<o.length;r++){g=o[r];if(this.routeGraph[g]["visited"]){continue}if(v[g]){continue}u=this.routeGraph[g]["td"];if(u>0&&(A==-1||u<A)){m=g;A=u;q=r}}if(A==-1){return y}o.splice(q,1)}for(r=0;r<this.routeGraph[m]["jumps"].length;r++){h=this.routeGraph[m]["jumps"][r];p=1;if(x&&this.routeGraph[h]["sec"]<0.5&&this.routeGraph[m]["sec"]>=0.5){p=1000}if(z&&this.routeGraph[h]["sec"]>=0.5&&this.routeGraph[m]["sec"]<0.5){p=1000}k=this.routeGraph[m]["td"]+p;if(this.routeGraph[h]["td"]<0||this.routeGraph[h]["td"]>k){this.routeGraph[h]["td"]=k;this.routeGraph[h]["prevID"]=m;o.push(h)}}this.routeGraph[m]["visited"]=true;m=0}s=this.routeGraph[l]["prevID"];while(s!=t){y.push(s);s=this.routeGraph[s]["prevID"]}y.push(t);return y}})(jQuery);var EVEn=EVEn||{};EVEn.map=EVEn.map||{};EVEn.map.System=EVEn.map.System||{};(function(d){var c=EVEn.map.System,b=EVEn,f=EVEn.map,a={ID:null,name:null,regionID:null,constellationID:null,pos:{x:null,y:null,z:null},posMax:{x:null,y:null,z:null},posMin:{x:null,y:null,z:null},luminosity:null,border:null,fringe:null,corrider:null,hub:null,international:null,regional:null,constellation:null,contiguous:null,security:null,sec:null,factionID:null,radius:null,sunTypeID:null,securityClass:null,wormholeClassID:null,stationCount:null},e={};c.Create=function(){var g=Object.create(e);d.extend(true,g,a);return g};e.LoadID=function(k,i,g){var h,j;if(!k||!i||!g){return false}if(!k.HasTable(i)){return false}if(!k.tables[i]["d"].hasOwnProperty(g)){return false}h=k.tables[i]["colmap"];j=k.tables[i]["d"][g];this.ID=g;this.name=j[h.solarSystemName];this.regionID=j[h.regionId];this.constellationID=j[h.constellationID];this.pos={x:j[h.x],y:j[h.y],z:j[h.z]};this.posMin={x:j[h.xMin],y:j[h.yMin],z:j[h.zMin]};this.posMax={x:j[h.xMax],y:j[h.yMax],z:j[h.zMax]};this.luminosity=j[h.luminosity];this.border=j[h.border];this.fringe=j[h.fringe];this.corridor=j[h.corridor];this.hub=j[h.hub];this.international=j[h.international];this.regional=j[h.regional];this.constellation=j[h.constellation];this.contiguous=j[h.contiguous];this.security=j[h.security];this.sec=this.security.toFixed(1);this.factionID=(j[h.factionID]!=0)?j[h.factionID]:null;this.radius=j[h.radius];this.sunTypeID=j[h.sunTypeID];this.securityClass=j[h.securityClass];this.wormholeClassID=j[h.wormholeClassID];this.stationCount=(j[h.stationCount])?j[h.stationCount]:0;return true}})(jQuery);EVEn.map.SystemIter=EVEn.map.SystemIter||{};(function(e){var d=EVEn.map.SystemIter,c=EVEn,g=EVEn.map,b=EVEn.map.System,a={curidx:0,src:null,tbl:null,keyset:[]},f={};d.Create=function(k,j){var i,h;if(!k||!k.HasTable(j)){return null}i=Object.create(f),e.extend(true,i,a);i.src=k;i.tbl=j;for(h in k.tables[j]["d"]){if(!k.tables[j]["d"].hasOwnProperty(h)){continue}i.keyset.push(h)}return i};f.HasNext=function(){if(this.curidx<this.keyset.length){return true}};f.Next=function(){var h;h=b.Create();if(!h.LoadID(this.src,this.tbl,this.keyset[this.curidx])){h=null}this.curidx++;return h}})(jQuery);